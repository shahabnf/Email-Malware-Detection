# Python CentOS find URL in body
import os


# Directory selection
# home_path = '~'               # Linux
home_path = 'd:/files/home/'    # Windows

# Iterate through each folder in the home directory
for folder_name in os.listdir(home_path):
    Maildir_path = os.path.join(home_path, folder_name) + '/Maildir/cur/'
    print(Maildir_path)


    # Store the contents between "Content-Type" and "Content-Transfer-Encoding OR before --_" strings
    content_type_content = ''
    i = 0
    # Iterate through each file in the folder
    for filename in os.listdir(Maildir_path):
        file_path = os.path.join(Maildir_path, filename)
        
        # Check if the current path is a file
        if os.path.isfile(file_path):
            with open(file_path, 'r') as file:
                i += 1
                lines = file.readlines()
                found_content_type = False
                
                # Iterate through each line in the file
                for line in lines:
                    # if found_content_type and 'Content-Transfer-Encoding' in line:
                    # if found_content_type and ('--_' or 'Content-Transfer-Encoding') in line:
                    if found_content_type and '--_' in line:
                        break  # Stop reading after finding "Content-Transfer-Encoding OR --_"
                    
                    if found_content_type:
                        content_type_content += line  # Append the line to the content
                        
                    # if 'Content-Type' in line:
                    if 'Content-Type: text' in line:
                        found_content_type = True  # Start storing content after finding "Content-Type"
        
    # Print the stored content
    print(content_type_content)
    print(f'There are {i} file(s) in this {folder_name} directory.', \
         '\n********** EOF **********')
